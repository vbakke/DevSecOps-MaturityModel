<!-- Generic selectable list for teams or groups -->
<div class="selectable-list">
  <div class="selectable-list-header">
    <h2>{{ title }}</h2>
    <button mat-icon-button *ngIf="canEdit && !relationshipEditMode" (click)="toggleEditMode()" title="Edit {{ title }}" color="red">
      <mat-icon>edit</mat-icon>
    </button>
    <span *ngIf="editMode" >
      <button mat-icon-button (click)="addItem.emit()" title="{{ addLabel }} {{ title }}">
        <mat-icon>add</mat-icon>
      </button>
      <button mat-icon-button (click)="cancel.emit()" title="Cancel, forget changes">
        <!-- <mat-icon>close</mat-icon> -->
        <!-- <mat-icon>keyboard_return</mat-icon> -->
        <!-- <mat-icon>fast_rewind</mat-icon> -->
        <!-- <mat-icon>replay</mat-icon> -->
        <mat-icon>undo</mat-icon>
      </button>
      <button mat-icon-button (click)="save.emit()" title="Accept changes">
        <mat-icon>check</mat-icon>
      </button>
    </span>
</div>
  <ul>
    <li *ngFor="let name of items"
        [class.selected]="name === selectedItem"
        [class.highlighted]="highlightedItems.includes(name)"
        (click)="onItemClicked(name)">
      <span *ngIf="editMode && editingOrgName === name; then editItem else displayItem"></span>
      <ng-template #editItem>
        <input #editInput [(ngModel)]="editingName" (keydown.escape)="cancelEditItem(name)" (keydown.enter)="saveEditedItem(name)" (blur)="saveEditedItem(name)" />
      </ng-template>
      <ng-template #displayItem>
        <span>{{ name }}</span>
      </ng-template>
      <!-- <span *ngIf="!editMode || editingOrgName !== name">{{ name }}</span> -->
      <span *ngIf="editMode">
        <button mat-icon-button (click)="$event.stopPropagation(); startEditItem(name)" title="Rename {{ name }}">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button (click)="$event.stopPropagation(); deleteItem.emit(name)" title="Delete {{ name }}">
          <mat-icon>delete</mat-icon>
        </button>
      </span>
      <span *ngIf="relationshipEditMode">
        <mat-icon *ngIf="highlightedItems.includes(name);  else unselected" color="primary">check_box</mat-icon>
        <ng-template #unselected><mat-icon>check_box_outline_blank</mat-icon></ng-template>
      </span>
    </li>
  </ul>
</div>
